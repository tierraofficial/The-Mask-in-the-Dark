Read [](file:///e%3A/ggj2026/The-Mask-in-the-Dark/videos)

Updated todo list

## ğŸ“‹ æœ€ç»ˆå®Œæ•´å®ç°è®¡åˆ’ï¼ˆäº”å±‚ç•Œé¢ï¼‰

### **æœ€æ–°ç•Œé¢æµç¨‹**ï¼ˆå¸¦è§†é¢‘ç»“ç®—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£ å¼€å§‹ç•Œé¢ (Start Screen)          â”‚
â”‚  - æ˜¾ç¤ºGameStart.jpg                 â”‚
â”‚  - ç‚¹å‡»ä»»æ„ä½ç½® â†’ è¿›å…¥æ•™ç¨‹             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ (ç‚¹å‡»)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£ æ•™ç¨‹ç•Œé¢ (Tutorial Screen)       â”‚
â”‚  - æ˜¾ç¤ºGameTutorial.jpg              â”‚
â”‚  - ç‚¹å‡»ä»»æ„ä½ç½® â†’ è¿›å…¥æ¸¸æˆ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ (ç‚¹å‡»)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£ æ¸¸æˆç•Œé¢ (Game Screen)           â”‚
â”‚  - Canvas + æ¸¸æˆUI                   â”‚
â”‚  - æ¸¸æˆé€»è¾‘è¿è¡Œ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ (gameOver = true)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£ ç»“ç®—è§†é¢‘ (GameOver Video)        â”‚
â”‚  - å…¨å±æ’­æ”¾GameOver.mp4              â”‚
â”‚  - è‡ªåŠ¨æ’­æ”¾ï¼ˆæ— å¯è·³è¿‡ï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ (è§†é¢‘æ’­æ”¾å®Œæˆ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£ ç»“ç®—ç•Œé¢ (Game Over Stats)       â”‚
â”‚  - æ˜¾ç¤ºç”Ÿå­˜å›åˆæ•°                     â”‚
â”‚  - ã€é‡æ–°å¼€å§‹ã€‘æŒ‰é’® â†’ å›åˆ°å¼€å§‹ç•Œé¢    â”‚
â”‚  - ã€å›åˆ°å¼€å§‹ã€‘æŒ‰é’® â†’ å›åˆ°å¼€å§‹ç•Œé¢    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **æ ¸å¿ƒæ•°æ®æµ**

```javascript
// GameManager â†’ ScreenManager
{
  survivalRounds: number,  // ç”Ÿå­˜å›åˆæ•°
  isWin: boolean,          // æ˜¯å¦èµ¢äº†ï¼ˆå‡»è´¥æ¶çµï¼‰
  lumensCount: number,     // æœ€ç»ˆç¯å…‰æ•°
  // å…¶ä»–ç»Ÿè®¡æ•°æ®...
}
```

### **ä¿®æ”¹è¯¦æƒ…è¡¨**

| æ­¥éª¤ | æ–‡ä»¶                   | æ“ä½œ     | å…·ä½“å†…å®¹                                                     |
| ---- | ---------------------- | -------- | ------------------------------------------------------------ |
| 1ï¸âƒ£    | `src/ScreenManager.js` | **æ–°å»º** | ç®¡ç†5ä¸ªç•Œé¢çš„çŠ¶æ€æœº<br/>â€¢ å¤„ç†è§†é¢‘æ’­æ”¾å®Œæˆäº‹ä»¶<br/>â€¢ è®¡æ—¶å›åˆæ•°<br/>â€¢ æ˜¾ç¤ºç»“ç®—ç»Ÿè®¡ |
| 2ï¸âƒ£    | index.html             | **ä¿®æ”¹** | æ·»åŠ 5ä¸ªå®¹å™¨div<br/>â€¢ start-screen (GameStart.jpg)<br/>â€¢ tutorial-screen (GameTutorial.jpg)<br/>â€¢ game-screen (Canvas + UI)<br/>â€¢ gameover-video-screen (**videoæ ‡ç­¾æ’­æ”¾GameOver.mp4**)<br/>â€¢ gameover-stats-screen (ç»Ÿè®¡+æŒ‰é’®) |
| 3ï¸âƒ£    | style.css              | **æ‰©å±•** | â€¢ å…¨å±è¦†ç›–æ ·å¼<br/>â€¢ æ·¡å…¥æ·¡å‡ºåŠ¨ç”»<br/>â€¢ z-indexåˆ†å±‚(100-500)<br/>â€¢ è§†é¢‘å…¨å±æ˜¾ç¤º<br/>â€¢ ç»“ç®—æŒ‰é’®æ ·å¼ |
| 4ï¸âƒ£    | GameManager.js         | **ä¿®æ”¹** | â€¢ æ·»åŠ `turnCount`è¿½è¸ªå›åˆæ•°<br/>â€¢ gameOveræ—¶è°ƒç”¨`ScreenManager.showGameOverVideo(turnCount, isWin)` |
| 5ï¸âƒ£    | main.js                | **ä¿®æ”¹** | â€¢ åˆå§‹åŒ–ScreenManager<br/>â€¢ ä¸è‡ªåŠ¨å¯åŠ¨GameManager            |

### **ScreenManager å…³é”®æ–¹æ³•**

```javascript
class ScreenManager {
  constructor(renderer, uiManager) {
    this.currentScreen = 'start';
    this.turnCount = 0;
    this.videoElement = null; // ç»“ç®—è§†é¢‘
  }
  
  // ç•Œé¢è½¬æ¢
  showStartScreen();
  showTutorialScreen();
  showGameScreen(gameManager);
  showGameOverVideo(turnCount, isWin);  // æ’­æ”¾è§†é¢‘
  showGameOverStats(turnCount, isWin);  // è§†é¢‘å®Œæˆåæ˜¾ç¤ºç»Ÿè®¡
  reset();
  
  // å†…éƒ¨æ–¹æ³•
  _onVideoEnded();  // è§†é¢‘æ’­æ”¾å®Œæˆåè‡ªåŠ¨æ˜¾ç¤ºç»Ÿè®¡
}
```

### **äº¤äº’æµç¨‹æ—¶åºå›¾**

```
ç”¨æˆ·                     ScreenManager              GameManager
 â”‚                            â”‚                          â”‚
 â”œâ”€(ç‚¹å‡»å¼€å§‹ç•Œé¢)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
 â”‚                            â”œâ”€â”€(åˆ›å»ºGameManager)â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                            â”‚<â”€â”€(initå®Œæˆ)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚<â”€â”€(æ˜¾ç¤ºæ¸¸æˆ)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
 â”‚                            â”‚                    (æ¸¸æˆè¿è¡Œ)
 â”‚                            â”‚<â”€â”€(gameOver=true)â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚<â”€â”€(æ’­æ”¾ç»“ç®—è§†é¢‘)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
 â”‚ (è§†é¢‘è‡ªåŠ¨æ’­æ”¾)              â”‚                          â”‚
 â”‚<â”€â”€(è§†é¢‘å®Œæˆï¼Œæ˜¾ç¤ºç»Ÿè®¡)â”€â”€â”€â”€â”€â”€â”‚                          â”‚
 â”‚                            â”‚                          â”‚
 â”œâ”€(ç‚¹å‡»ã€é‡æ–°å¼€å§‹ã€‘)â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
 â”‚                            â”œâ”€â”€(reset)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚<â”€â”€(å›åˆ°å¼€å§‹ç•Œé¢)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
```

### **GameManager ä¿®æ”¹è¦ç‚¹**

éœ€è¦åœ¨GameManagerä¸­ï¼š
1. **æ–°å¢å­—æ®µ**: `turnCount` - ç”¨äºè®°å½•ç”Ÿå­˜å›åˆæ•°
2. **æ–°å¢æ–¹æ³•**: åœ¨`startNextTurn()`ä¸­é€’å¢`turnCount++`
3. **ä¿®æ”¹endGame()**: è°ƒç”¨`ScreenManager.showGameOverVideo(this.turnCount, isWin)`

---

**ç°åœ¨å‡†å¤‡å¼€å§‹å®ç°å—ï¼Ÿå»ºè®®ä»ä»¥ä¸‹é¡ºåºå¼€å§‹ï¼š**

1. âœ… åˆ›å»º `ScreenManager.js` (å¤„ç†è§†é¢‘é€»è¾‘+ç•Œé¢çŠ¶æ€)
2. âœ… æ›´æ–° index.html (æ·»åŠ 5ä¸ªå®¹å™¨+videoæ ‡ç­¾)
3. âœ… æ‰©å±• style.css (æ ·å¼+åŠ¨ç”»)
4. âœ… ä¿®æ”¹ GameManager.js (è¿½è¸ªturnCount+é›†æˆScreenManager)
5. âœ… ä¿®æ”¹ main.js (åˆå§‹åŒ–æµç¨‹)
6. âœ… æµ‹è¯•æ‰€æœ‰äº¤äº’æµç¨‹

**å¼€å§‹å—ï¼Ÿ** ğŸš€